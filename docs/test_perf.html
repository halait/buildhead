<!DOCTYPE html>
	<html>
		<head>
			<title>Test</title>
		</head>
		<body>
		<canvas id="c" style="width: 700px; height: 700px;"></canvas>
		<script>
			"use strict";
			var canvas = document.getElementById("c");

			canvas.width = 700;
			canvas.height = 700;

			//let gl = canvas.getContext("webgl", {antialias: false});
			let gl = canvas.getContext("webgl");
			if(!gl) console.log("aint no webgl on this b");
			else console.log("webgl be workin dawg");

			let vertexShaderSource = `
			attribute vec2 a_position;
			void main() {
				gl_Position = vec4(a_position, 0, 1);
			}
			`;

			let fragmentShaderSource = `
			precision lowp float;
			void main() {
				gl_FragColor = vec4(1, 1, 1, 1);
			}
			`;


			function createShader(gl, type, source) {
				let shader = gl.createShader(type);
				gl.shaderSource(shader, source);
				gl.compileShader(shader);
				let success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);
				if(success) {
					return shader;
				}
				console.log(gl.getShaderInfoLog(shader));
				gl.deleteShader(shader);
			}
 
			let vertexShader = createShader(gl, gl.VERTEX_SHADER, vertexShaderSource);
			let fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);

			function createProgram(gl, vertexShader, fragmentShader) {
				let program = gl.createProgram();
				gl.attachShader(program, vertexShader);
				gl.attachShader(program, fragmentShader);
				gl.linkProgram(program);
				let success = gl.getProgramParameter(program, gl.LINK_STATUS);
				if(success) {
					return program;
				}
				console.log(gl.getProgramInfoLog(program));
				gl.deleteProgram(program);
			}

			var program = createProgram(gl, vertexShader, fragmentShader);
			const A_POSITION_LOCATION = gl.getAttribLocation(program, "a_position");


			gl.clearColor(0, 0, 0, 1);

			gl.useProgram(program);
			
			gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
			let positionsBuffer = gl.createBuffer();
			let positions = new Float32Array(100);

			gl.bindBuffer(gl.ARRAY_BUFFER, positionsBuffer);
			gl.vertexAttribPointer(A_POSITION_LOCATION, 2, gl.FLOAT, false, 0, 0);
			gl.enableVertexAttribArray(A_POSITION_LOCATION);

			let x = 0.0;
			let y = 0.0;

			function render(){
				gl.clear(gl.COLOR_BUFFER_BIT);
				let k = 0;
				let i = 0;
				x += 0.005;
				y += 0.005;
				if(x > 1.0) x = -1.0;
				if(y > 1.0) y = -1.0;
				positions[k++] = -0.5 + x;
				positions[k++] = 0 + y;
				positions[k++] = 0.5 + x;
				positions[k++] = 0.5 + y;
				positions[k++] = 0.5 + x;
				positions[k++] = -0.5 + y;

				gl.bindBuffer(gl.ARRAY_BUFFER, positionsBuffer);
				gl.bufferData(gl.ARRAY_BUFFER, positions.subarray(0, k), gl.STREAM_DRAW);
				gl.drawArrays(gl.TRIANGLES, 0, 3);
				requestAnimationFrame(render);
			}
			requestAnimationFrame(render);
			
		</script>
		</body>
	</html>


